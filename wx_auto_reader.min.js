function supportNotify(){window.Notification?(console.log("微读自动阅读器·您的浏览器支持消息通知"),requestPermission()):alert("微读自动阅读器·您的浏览器不支持消息通知，建议您使用Chrome浏览器")}function requestPermission(){setTimeout((function(){window.Notification&&"default"===Notification.permission&&Notification.requestPermission((function(status){"granted"===status?sendNotice("微读自动阅读器","微读自动阅读器很高兴为您服务"):alert("当前浏览器不支持弹出消息")}))}),1e3)}function sendNotice(title,content){if(window.Notification&&"granted"===Notification.permission){var m=new Notification(title,{body:content||""});m.onclick=function(){window.focus(),m.close()}}}function wxAutoReader(){var title=document.getElementsByClassName("readerTopBar_title_chapter")[0].innerText,chapter=document.getElementsByClassName("readerTopBar_title_link")[0].innerText,app=document.getElementById("app"),clientHeight=app.clientHeight,scrollHeight=app.scrollHeight,limitHeight=scrollHeight-clientHeight,position=clientHeight,scrollEnabled=!0,onScroll,intervalHandler=setInterval((function(){if(scrollEnabled)if(position<limitHeight){position+=.03*clientHeight;var progress=(100*Math.min(position/limitHeight,1)).toFixed(2)+"%";document.title=`【${chapter} · ${title}】已阅读${progress}`,scroll(0,position)}else{var btn=document.getElementsByClassName("readerFooter_button")[0];btn?(scrollEnabled=!1,btn.click(),setTimeout(()=>{scrollEnabled=!0,app=document.getElementById("app"),title=document.getElementsByClassName("readerTopBar_title_chapter")[0].innerText,chapter=document.getElementsByClassName("readerTopBar_title_link")[0].innerText,clientHeight=app.clientHeight,scrollHeight=app.scrollHeight,limitHeight=scrollHeight-clientHeight,position=0},1e4)):(clearInterval(intervalHandler),document.title=`【${chapter}】已读完`,alert(document.title),sendNotice(document.title))}}),2e3)}function worker_fun(){postMessage("tick")}var w;function startWorker(){var blob=new Blob(["onmessage = function(e){    "+worker_fun.toString()+"    worker_fun(e.data);}"]),blobURL=window.URL.createObjectURL(blob);"undefined"!=typeof Worker&&void 0===w&&((w=new Worker(blobURL)).onmessage=function(event){switch(event.data){case"tick":wxAutoReader()}},w.postMessage("tick"))}function stopWorker(){w.terminate(),w=void 0}window.onload=function(){supportNotify()},supportNotify(),startWorker();